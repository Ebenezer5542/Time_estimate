<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TIme Estimate Â· Arrival Predictor</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet" />

  <!-- Flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />

  <style>
    /* â”€â”€ Reset & tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #0b0f1a;
      --surface:   #131929;
      --surface2:  #1b2236;
      --border:    rgba(255,255,255,0.07);
      --accent:    #f5a623;
      --accent2:   #e07b00;
      --text:      #e8eaf0;
      --muted:     #6b7a99;
      --success:   #2dd4a0;
      --error:     #ff6b6b;
      --radius:    14px;
      --shadow:    0 24px 60px rgba(0,0,0,0.5);
      --font-head: 'Syne', sans-serif;
      --font-body: 'DM Sans', sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-body);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px;
      /* Subtle grid texture */
      background-image:
        linear-gradient(rgba(245,166,35,0.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(245,166,35,0.04) 1px, transparent 1px);
      background-size: 40px 40px;
    }

    /* â”€â”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
      width: 100%;
      max-width: 520px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 40px 36px;
      box-shadow: var(--shadow);
      animation: rise 0.55s cubic-bezier(0.22,1,0.36,1) both;
    }

    @keyframes rise {
      from { opacity: 0; transform: translateY(30px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .header { text-align: center; margin-bottom: 32px; }

    .badge {
      display: inline-flex; align-items: center; gap: 6px;
      background: rgba(245,166,35,0.12);
      border: 1px solid rgba(245,166,35,0.3);
      color: var(--accent);
      font-family: var(--font-head);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      padding: 5px 12px;
      border-radius: 99px;
      margin-bottom: 14px;
    }

    .badge svg { width: 12px; height: 12px; fill: currentColor; }

    h1 {
      font-family: var(--font-head);
      font-size: clamp(1.6rem, 5vw, 2.1rem);
      font-weight: 800;
      line-height: 1.1;
      color: #fff;
      letter-spacing: -0.03em;
    }

    h1 span { color: var(--accent); }

    .subtitle {
      font-size: 0.88rem;
      color: var(--muted);
      margin-top: 8px;
      font-weight: 300;
    }

    /* â”€â”€ Divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .divider {
      height: 1px;
      background: var(--border);
      margin: 0 0 28px;
    }

    /* â”€â”€ Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .form-group { display: flex; flex-direction: column; gap: 7px; }
    .form-group.full { grid-column: 1 / -1; }

    label {
      font-size: 0.76rem;
      font-weight: 500;
      letter-spacing: 0.07em;
      text-transform: uppercase;
      color: var(--muted);
    }

    input, select {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      color: var(--text);
      font-family: var(--font-body);
      font-size: 0.95rem;
      padding: 11px 14px;
      width: 100%;
      transition: border-color 0.2s, box-shadow 0.2s;
      appearance: none;
      -webkit-appearance: none;
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(245,166,35,0.15);
    }

    input::placeholder { color: var(--muted); }

    /* Custom select arrow */
    .select-wrap { position: relative; }
    .select-wrap::after {
      content: '';
      position: absolute;
      right: 14px; top: 50%;
      transform: translateY(-50%);
      width: 0; height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 5px solid var(--muted);
      pointer-events: none;
    }

    /* Flatpickr dark override */
    .flatpickr-calendar {
      background: var(--surface2) !important;
      border: 1px solid var(--border) !important;
      border-radius: var(--radius) !important;
      box-shadow: var(--shadow) !important;
    }
    .flatpickr-time input,
    .flatpickr-time .flatpickr-am-pm {
      color: var(--text) !important;
      background: transparent !important;
    }
    .flatpickr-time .numInputWrapper:hover,
    .flatpickr-time .flatpickr-am-pm:hover {
      background: var(--border) !important;
    }
    .numInput { color: var(--text) !important; }
    .arrowUp::after, .arrowDown::after { border-bottom-color: var(--muted) !important; border-top-color: var(--muted) !important; }

    /* â”€â”€ Errors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .errors {
      background: rgba(255,107,107,0.08);
      border: 1px solid rgba(255,107,107,0.3);
      border-radius: var(--radius);
      padding: 12px 16px;
      margin-bottom: 20px;
      animation: shake 0.35s ease;
    }

    @keyframes shake {
      0%,100% { transform: translateX(0); }
      25%      { transform: translateX(-6px); }
      75%      { transform: translateX(6px); }
    }

    .errors p {
      font-size: 0.84rem;
      color: var(--error);
      display: flex; align-items: flex-start; gap: 7px;
      line-height: 1.4;
    }

    .errors p + p { margin-top: 6px; }

    /* â”€â”€ Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn-submit {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #000;
      font-family: var(--font-head);
      font-weight: 700;
      font-size: 0.95rem;
      letter-spacing: 0.04em;
      border: none;
      border-radius: var(--radius);
      padding: 14px;
      cursor: pointer;
      width: 100%;
      display: flex; align-items: center; justify-content: center; gap: 8px;
      transition: opacity 0.2s, transform 0.15s;
      margin-top: 6px;
      position: relative;
      overflow: hidden;
    }

    .btn-submit::before {
      content: '';
      position: absolute; inset: 0;
      background: rgba(255,255,255,0.12);
      opacity: 0;
      transition: opacity 0.2s;
    }

    .btn-submit:hover::before { opacity: 1; }
    .btn-submit:hover { transform: translateY(-1px); }
    .btn-submit:active { transform: translateY(0) scale(0.98); }

    /* Loading state */
    .btn-submit.loading .btn-text { opacity: 0; }
    .btn-submit.loading .spinner { display: block; }
    .spinner {
      display: none;
      width: 20px; height: 20px;
      border: 2px solid rgba(0,0,0,0.2);
      border-top-color: #000;
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      position: absolute;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ Result card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .result {
      margin-top: 28px;
      background: var(--surface2);
      border: 1px solid rgba(45,212,160,0.25);
      border-radius: var(--radius);
      padding: 24px;
      text-align: center;
      animation: pop 0.45s cubic-bezier(0.34,1.56,0.64,1) both;
    }

    @keyframes pop {
      from { opacity: 0; transform: scale(0.92); }
      to   { opacity: 1; transform: scale(1); }
    }

    .result-label {
      font-size: 0.72rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--muted);
      font-weight: 500;
      margin-bottom: 8px;
    }

    .result-time {
      font-family: var(--font-head);
      font-size: clamp(2.2rem, 8vw, 3rem);
      font-weight: 800;
      color: var(--success);
      letter-spacing: -0.04em;
      line-height: 1;
    }

    .result-duration {
      font-size: 0.85rem;
      color: var(--muted);
      margin-top: 8px;
    }

    .result-duration strong { color: var(--text); }

    .result-emoji {
      font-size: 1.6rem;
      margin-top: 14px;
      display: block;
    }

    /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .footer {
      text-align: center;
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 28px;
    }

    .linkedin-icon {
        width: 18px;          /* controls size */
        height: 18px;
        vertical-align: middle;
        transition: transform 0.25s ease, opacity 0.25s ease;
        opacity: 0.8;         /* slightly subtle look */
    }

    .linkedin-icon:hover {
        transform: scale(1.15);
        opacity: 1;
    }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 420px) {
      .card { padding: 28px 20px; }
      .form-grid { grid-template-columns: 1fr; }
      .btn-submit { grid-column: 1; }
    }
  </style>
</head>
<body>

<div class="card">

  <!-- Header -->
  <div class="header">
    <div class="badge">
      <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 14.93V15a1 1 0 0 0-2 0v2.93A8 8 0 0 1 4.07 11H7a1 1 0 0 0 0-2H4.07A8 8 0 0 1 11 4.07V7a1 1 0 0 0 2 0V4.07A8 8 0 0 1 19.93 11H17a1 1 0 0 0 0 2h2.93A8 8 0 0 1 13 16.93z"/></svg>
      Time Estimate
    </div>
    <h1>Predict your<br/><span>arrival time</span></h1>
    <p class="subtitle">Smart commute planning for Accra's roads.</p>
  </div>

  <div class="divider"></div>

  <!-- Errors -->
  {% if errors %}
  <div class="errors">
    {% for err in errors %}
    <p>
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#ff6b6b" stroke-width="2.5" style="flex-shrink:0;margin-top:1px"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
      {{ err }}
    </p>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Form -->
  <form method="POST" id="travelForm" novalidate>
    <div class="form-grid">

      <!-- Departure time -->
      <div class="form-group full">
        <label for="dep_time">Departure Time</label>
        <input type="text" id="dep_time" name="dep_time"
               placeholder="e.g. 07:30"
               value="{{ form.dep_time if form else '' }}"
               autocomplete="off" required />
      </div>

      <!-- Transport mode -->
      <div class="form-group full">
        <label for="trans_mode">Transport Mode</label>
        <div class="select-wrap">
          <select id="trans_mode" name="trans_mode" required>
            <option value="" disabled {% if not form or not form.get('trans_mode') %}selected{% endif %}>Choose transport</option>
            {% for mode in transport_modes %}
              <option value="{{ mode }}" {% if form and form.get('trans_mode') == mode %}selected{% endif %}>{{ mode }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- Home location -->
      <div class="form-group">
        <label for="home_location">Home Location</label>
        <div class="select-wrap">
          <select id="home_location" name="home_location" required>
            <option value="" disabled {% if not form or not form.get('home_location') %}selected{% endif %}>Select area</option>
            {% for town in towns %}
              <option {% if form and form.get('home_location') == town %}selected{% endif %}>{{ town }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- Office location -->
      <div class="form-group">
        <label for="office_location">Office Location</label>
        <div class="select-wrap">
          <select id="office_location" name="office_location" required>
            <option value="" disabled {% if not form or not form.get('office_location') %}selected{% endif %}>Select area</option>
            {% for town in towns %}
              <option {% if form and form.get('office_location') == town %}selected{% endif %}>{{ town }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- Submit -->
      <button type="submit" class="btn-submit" id="submitBtn">
        <div class="spinner"></div>
        <span class="btn-text">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle">
            <polyline points="22 2 11 13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
          </svg>
          Predict Arrival
        </span>
      </button>

    </div>
  </form>

  <!-- Result -->
  {% if arrival_time %}
  <div class="result">
    <p class="result-label">Estimated Arrival</p>
    <div class="result-time">{{ arrival_time }}</div>
    {% if travel_duration %}
    <p class="result-duration">Travel time: <strong>{{ travel_duration }}</strong></p>
    {% endif %}
    <span class="result-emoji">ðŸš¦</span>
  </div>
  {% endif %}

 <p class="footer">
    Built by Ohenebeng Ebenezer 
    <a href="https://www.linkedin.com/in/ohenebeng-ebenezer-0190b421a" target="_blank">
        <img src="{{ url_for('static', filename='linkedin-svgrepo-com.svg') }}" 
             alt="LinkedIn" 
             class="linkedin-icon">
    </a>
</p>

<!-- Flatpickr -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
  // Time picker
  flatpickr("#dep_time", {
    enableTime: true,
    noCalendar: true,
    dateFormat: "H:i",
    time_24hr: true,
    minuteIncrement: 5,
  });

  // Loading spinner on submit
  const form = document.getElementById("travelForm");
  const btn  = document.getElementById("submitBtn");
  form.addEventListener("submit", () => {
    btn.classList.add("loading");
    btn.disabled = true;
  });
</script>
</body>
</html>